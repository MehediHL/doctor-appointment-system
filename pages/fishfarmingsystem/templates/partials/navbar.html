<nav class="navbar">
  <div class="nav-left">
    <a href="/dashboard">Home</a>
    <a href="/about">About</a>
    <a href="/marketplace">Buy & Sell</a>
    <a href="/classify">Classify Fish</a>
    <a href="/chatbot">Chatbot</a>
    <a href="/daily_guide">Daily Guide</a>
  </div>

  <!-- Middle: Translator Button -->
  <div class="nav-center">
    <button id="translateBtn" class="translate-btn">Bangla</button>
  </div>

  <div class="nav-right">
    <div class="user-menu">
      <img src="{{ user.photo if user.photo else url_for('static', filename='default.png') }}" alt="User" class="user-photo">
      <span>{{ user.first_name }} {{ user.last_name }}</span>
      <div class="dropdown">
        <a href="/profile">View Profile</a>
        <form id="logoutForm" method="post" action="/logout">
          <button type="submit">Log Out</button>
        </form>
      </div>
    </div>
  </div>
</nav>

<script>
  document.getElementById("logoutForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    let res = await fetch("/logout", { method: "POST" });
    let data = await res.json();
    if (data.status === "ok") window.location.href = "/";
  });
</script>
<script>
  // Handle active navbar link
  document.addEventListener('DOMContentLoaded', function () {
    const navLinks = document.querySelectorAll('.nav-left a');

    // restore active link based on current URL (so it stays active after reload)
    const currentPath = window.location.pathname;
    navLinks.forEach(link => {
      if (link.getAttribute('href') === currentPath) {
        link.classList.add('active');
      }

      // handle click event
      link.addEventListener('click', function () {
        navLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
      });
    });
  });
</script>
<!-- Google Translate hidden element -->
<!-- Hidden Google Translate Element -->
<div id="google_translate_element" style="display:none;"></div>

<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,bn'
    }, 'google_translate_element');
  }
</script>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("translateBtn");
    let isBangla = false;

    btn.addEventListener("click", () => {
      const select = document.querySelector(".goog-te-combo");
      if (select) {
        if (!isBangla) {
          select.value = "bn";
          btn.textContent = "English";
        } else {
          select.value = "en";
          btn.textContent = "Bangla";
        }
        isBangla = !isBangla;
        select.dispatchEvent(new Event("change"));
      }
    });
  });
</script>


